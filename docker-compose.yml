services:
  matching-service:
    build: ./services/matching-service
    container_name: peerprep-matching-service
    ports:
      - '${MATCHING_SERVICE_PORT:-3002}:${MATCHING_SERVICE_PORT:-3002}'
    environment:
      - REDIS_USERNAME=${REDIS_USERNAME}
      - REDIS_PASSWORD=${REDIS_PASSWORD}
      - REDIS_HOST=${REDIS_HOST}
      - REDIS_PORT=${REDIS_PORT}
      - MATCHING_SERVICE_PORT=${MATCHING_SERVICE_PORT:-3002}
      - NODE_ENV=development
      - MATCHING_TIMEOUT=3000
      - LOG_LEVEL=debug
    volumes:
      - ./services/matching-service:/app
      - /app/node_modules
    networks:
      - peerprep-network
    command: npm run dev

networks:
  peerprep-network:
    driver: bridge